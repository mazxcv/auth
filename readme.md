# SSO

включает в себя 3 компонента 
 - auth, 
 - permission, 
 - user info 

 AUTH: аутентификация и авторизация 
 пользователь обращается в auth И получит токен 

 в токен можно положить дополнительную информацию о пользователе, при этом валидация сообщения кладется на JWT
 открытый формат передачи - кодирование, фактически сериализация 
 подпись создается на sso 
 прочесть могут все, но поменять нельзя 

# Слои

 Transport, отвечает за связь с внешним миром и является gRPC Service 
 Service    Бизнес-логика и сервис Auth  + Permissions + EventSender 
 Data       SQLite 
 App        Run(), Stop(), Gracefull Shutdown, Healthchecks 

1) Разработка контракта, сервер, клиент, данные, ответы 
Protobuf позволит сгенерировать код на go 

# Работа с protoc 
указать папку с фалами 
путь до файла с протоколом который хотим скомпилировать 
куда сохраняются сгенерированные файлы 
технические данные - сгенерированные файлы будут использовать тот же пакет, что и протофайлы исходные 
куда складывать сгенерированный grpc код 
технические данные для grpc кода 
protoc -I proto proto/sso/sso.proto --go_out=./gen/go/ --go_opt=paths=source_relative --go-grpc_out=./gen/go/ --go-grpc_opt=paths=source_relative

# внешний вид

|--cmd ...........................команды для запуска приложения  
|  |--migrator ...................утилита для миграции бд  
|  |--sso.........................точка входа в сервис sso  
|--config.........................конфигурационные файлы yaml  
|  internal.......................внутренности проекта  
|  |--app.........................код для запуска компонентов приложения  
|  |  |--grpc.....................запуск grpc-сервера  
|  |--config......................загрузка конфигурации   
|  |  domain......................  
|  |  |--models...................структуры данных и модели домена  
|  |  grpc........................  
|  |  |--auth....................gRPC-хендлеры сервиса Auth  
|  |--lib........................Общие вспомогательные утилиты и функции  
|  |--services...................Сервисный слой бизнес-логика  
|  |  |--auth....................  
|  |  |--permissions.............  
|  |--storage....................Слой хранения данных  
|  |  |--sqlite..................Реализация на SQLite  
|--migrations....................Миграции для базы данных  
|--storage.......................Файлы хранилища, например, SQLite базы данных  
|--tests.........................Функциональные тесты  
  
# Config 
для превращения yaml-структуры 
go get -u github.com/ilyakaznacheev/cleanenv
